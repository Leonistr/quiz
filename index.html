<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Quiz</title>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        // üîπ –í—Å—Ç–∞–≤—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyA0JQp2C6LFeKVnaogjdXRKJJiwlfPjYy4",
            authDomain: "ekeb-14711.firebaseapp.com",
            projectId: "ekeb-14711",
            storageBucket: "ekeb-14711.firebasestorage.app",
            messagingSenderId: "344039659889",
            appId: "1:344039659889:web:ef6a68a841db89b51c3ed0"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function submitQuiz() {
            let name = document.getElementById("name").value;
            let score = Math.floor(Math.random() * 100);  // üîπ –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –±–∞–ª–ª (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π)

            await addDoc(collection(db, "quiz_results"), { 
                name, 
                score, 
                timestamp: Date.now() 
            });

            alert("–†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!");
        }

        async function showLeaderboard() {
            const q = query(collection(db, "quiz_results"), orderBy("score", "desc"));
            const querySnapshot = await getDocs(q);

            let leaderboard = "";
            querySnapshot.forEach((doc) => {
                leaderboard += `${doc.data().name}: ${doc.data().score} <br>`;
            });

            document.getElementById("leaderboard").innerHTML = leaderboard;
        }

        window.submitQuiz = submitQuiz;
        window.showLeaderboard = showLeaderboard;
    </script>
</head>
<body>
    <h1>–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞ Quiz</h1>
    <input type="text" id="name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
    <button onclick="submitQuiz()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>

    <h2>Leaderboard</h2>
    <button onclick="showLeaderboard()">–û–±–Ω–æ–≤–∏—Ç—å —Ä–µ–π—Ç–∏–Ω–≥</button>
    <div id="leaderboard"></div>
</body>
</html>
